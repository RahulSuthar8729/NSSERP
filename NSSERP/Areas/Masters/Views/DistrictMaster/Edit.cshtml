
@model NSSERP.Areas.Masters.Models.DistrictMaster

@{
    ViewData["Title"] = "Edit District";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="..." crossorigin="anonymous" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="..."></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="..."></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>

<div class="container mt-4">
    <div class="card">
        <div class="card-header">
            <h2>Edit District</h2>
        </div>
        <div class="card-body">

            <form asp-action="Edit" method="post">
               
                <div class="form-group">                    
                    <label asp-for="District_Name" class="control-label">District Name</label>
                    <input asp-for="District_Name" value="@Model.District_Name" name="District_Name" class="form-control" />
                    <input value="@Model.District_Code" type="hidden" name="District_Code" class="form-control" />
                    <span asp-validation-for="District_Name" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="CountryID" class="control-label">Country</label>
                    <select asp-for="CountryID" id="CountryID" name="CountryID" class="form-control">
                        <option value="">Select Country</option>
                        @foreach (var country in Model.CountryList)
                        {
                            <option value="@country.Country_Code" @(Model.Country_Code == country.Country_Code ? "selected" : "")>@country.Country_Name</option>
                        }
                    </select>
                    <span asp-validation-for="CountryID" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="StateID" class="control-label">State</label>
                    <select asp-for="StateID" id="StateID" name="StateID" class="form-control">
                        <option value="">Select State</option>
                        @foreach (var state in Model.StateList)
                        {
                            <option value="@state.State_Code" @(Model.State_Code == state.State_Code ? "selected" : "")>@state.State_Name</option>
                        }
                    </select>
                    <span asp-validation-for="StateID" class="text-danger"></span>
                </div>
            
    

                <button type="submit" @Model.District_Code class="btn btn-primary">Update</button>
                <a asp-action="Index" href="/Masters/DistrictMaster/Index" class="btn btn-warning">Back to List</a>
            </form>

            <script>
                $(document).ready(function () {
                    $('#CountryID').change(function () {
                        var countryId = $(this).val();
                        $.ajax({
                            url: '/Masters/DistrictMaster/GetStatesByCountryJson',
                            method: 'GET',
                            data: { countryId: countryId },
                            success: function (data) {
                                console.log('Received data:', data);

                                $('#StateID').empty();
                                $('#StateID').append('<option value="">Select State</option>');

                                // Use camelCase when accessing properties
                                $.each(data, function (index, state) {
                                    $('#StateID').append('<option value="' + state.stateID + '">' + state.stateName + '</option>');
                                });
                            },
                            error: function () {
                                console.log('Error fetching states.');
                            }
                        });
                    });
                });
            </script>

            <script>
                //-------------------------------For City-----------------------------------------------------
                $(document).ready(function () {
                    $('#StateID').change(function () {
                        var stateId = $(this).val();
                        $.ajax({
                            url: '/Masters/DistrictMaster/GetCityInJSon',
                            method: 'GET',
                            data: { stateId: stateId },
                            success: function (data) {
                                console.log('Received data:', data);

                                $('#CityID').empty();
                                $('#CityID').append('<option value="">Select City</option>');

                                // Use camelCase when accessing properties
                                $.each(data, function (index, city) {
                                    $('#CityID').append('<option value="' + city.cityID + '">' + city.cityName + '</option>');
                                });
                            },
                            error: function () {
                                console.log('Error fetching cities.');
                            }
                        });
                    });
                });

            </script>
        </div>
    </div>
</div>


